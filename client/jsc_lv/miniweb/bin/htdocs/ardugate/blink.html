<html>
<body>
<script language="javascript" src="serial.js"></script>
<script language="javascript" src="arduino.js"></script>
<script language="javascript">
var port = "COM18";
var on = false;

self.setInterval(blink, 1000);

function Start()
{
	connected = SerialOpen(port, 57600);
	if (!connected) {
		alert("Error connecting with Arduino on " + port);
		return;
	}

	pinMode(13, OUTPUT);

	alert("Connected!");
}

function Stop()
{
	SerialClose();
	connected = false;
	alert("Disconnected");
}

function blink()
{
	if (connected) {
		digitalWrite(13, on ? HIGH : LOW);
	}
	on = !on;
}
</script>

<input type="button" value="Start" onClick="Start()" />
<input type="button" value="Stop" onClick="Stop()"/>
</body>
</html>
